{"version":3,"sources":["./src/app/account/register/register.component.ts","./src/app/account/register/register.component.html","./src/app/account/account-routing/account-routing.module.ts","./src/app/account/login/login.component.ts","./src/app/account/login/login.component.html","./src/app/account/account.module.ts"],"names":[],"mappings":"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","file":"account-account-module.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators, AsyncValidatorFn } from '@angular/forms';\r\nimport { AccountService } from '../account.service';\r\nimport { Router } from '@angular/router';\r\nimport { timer, of } from 'rxjs';\r\nimport { map, switchMap } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-register',\r\n  templateUrl: './register.component.html',\r\n  styleUrls: ['./register.component.scss']\r\n})\r\nexport class RegisterComponent implements OnInit {\r\n  registerForm: FormGroup;\r\n  errors: string[];\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private accontService: AccountService,\r\n    private router: Router,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.createRegisterForm();\r\n  }\r\n\r\n  createRegisterForm() {\r\n    this.registerForm = this.fb.group({\r\n      displayName: [null, [Validators.required]],\r\n      email: [null,\r\n        [Validators.required, Validators.pattern('^[\\\\w-\\\\.]+@([\\\\w-]+\\\\.)+[\\\\w-]{2,4}$')],\r\n        [this.validateEmailNotTaken()]],\r\n      password: [null, [Validators.required]]\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n    //console.log(this.registerForm.value)\r\n    this.accontService.register(this.registerForm.value).subscribe(response => {this.router.navigateByUrl('/shop');\r\n      }, error => {\r\n        console.log(error);\r\n        this.errors = error.errors;\r\n      });\r\n  }\r\n\r\n  validateEmailNotTaken(): AsyncValidatorFn {\r\n    return control => {\r\n      return timer(500).pipe(\r\n        switchMap(() => {\r\n          if (!control.value) {\r\n            return of(null);\r\n          }\r\n\r\n          return this.accontService.checkEmailExists(control.value)\r\n            .pipe(\r\n              map(res => {\r\n                return res ? { emailExists: true } : null;\r\n              })\r\n            );\r\n        })\r\n      );\r\n    };\r\n  }\r\n}\r\n","<div class=\"d-flex justify-content-center mt-5\">\r\n  <div class=\"col-3\">\r\n    <form [formGroup]=\"registerForm\" (ngSubmit)=\"onSubmit()\">\r\n      <div class=\"text-center mb-4\">\r\n        <h1 class=\"h3 mb-3 font-weight-normal\">Register</h1>\r\n      </div>\r\n\r\n      <app-text-input formControlName=\"displayName\" [label]=\"'Display Name'\"></app-text-input>\r\n      <app-text-input formControlName=\"email\"  [label]=\"'Email Address'\"></app-text-input>\r\n      <app-text-input formControlName=\"password\" [label]=\"'Password'\" [type]=\"'Password'\"></app-text-input>\r\n\r\n      <ul class=\"text-danger list-unstyled\" *ngIf=\"errors\">\r\n        <li *ngFor=\"let error of errors\">\r\n          {{error}}\r\n        </li>\r\n      </ul>\r\n\r\n      <button \r\n              class=\"btn btn-lg btn-primary btn-block\"\r\n              type=\"submit\">\r\n        Register\r\n      </button>\r\n    </form>\r\n  </div>\r\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { LoginComponent } from '../login/login.component';\r\nimport { RegisterComponent } from '../register/register.component';\r\n\nconst routes: Routes = [\n  { path: 'login', component: LoginComponent },\n  { path: 'register', component: RegisterComponent }\n];\n\n@NgModule({\n  declarations: [],\n  imports: [\n    RouterModule.forChild(routes)\n  ],\n  exports:[RouterModule]\n})\nexport class AccountRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { AccountService } from '../account.service';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n\r\n  loginForm: FormGroup;\r\n  returnUrl: string;\r\n\r\n  constructor(private accountService: AccountService,private router: Router, private activatedRoute: ActivatedRoute) { }\r\n\r\n  ngOnInit(): void {\r\n    this.returnUrl = this.activatedRoute.snapshot.queryParams.returnUrl || '/shop';\r\n    this.createLoginForm();\r\n  }\r\n\r\n  createLoginForm() {\r\n    this.loginForm = new FormGroup({\r\n      email: new FormControl('', [Validators.required,\r\n      Validators.pattern('^[\\\\w-\\\\.]+@([\\\\w-]+\\\\.)+[\\\\w-]{2,4}$')]),\r\n      password: new FormControl('', Validators.required),\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n    this.accountService.login(this.loginForm.value)\r\n      .subscribe(() => {\r\n\r\n        this.router.navigateByUrl(this.returnUrl);\r\n\r\n      }, error => {\r\n        console.log(error);\r\n      });\r\n  }\r\n}\n\n\n","<div class=\"d-flex justify-content-center mt-5\">\r\n  <div class=\"col-3\">\r\n    <form [formGroup]=\"loginForm\" (ngSubmit)=\"onSubmit()\">\r\n      <div class=\"text-center mb-4\">\r\n        <h1 class=\"h3 mb-3 font-weight-normal\">Login</h1>\r\n      </div>\r\n\r\n      <app-text-input formControlName=\"email\"\r\n                      [label]=\"'Email Address'\"\r\n                      [type]=\"'email'\"></app-text-input>\r\n      <app-text-input formControlName=\"password\"\r\n                      [label]=\"'Password'\"\r\n                      [type]=\"'Password'\"></app-text-input>\r\n\r\n      <button [disabled]=\"loginForm.invalid\"\r\n              class=\"btn btn-lg btn-primary btn-block\"\r\n              type=\"submit\">\r\n        Sign in\r\n      </button>\r\n    </form>\r\n  </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LoginComponent } from './login/login.component';\nimport { RegisterComponent } from './register/register.component';\nimport { AccountRoutingModule } from './account-routing/account-routing.module';\r\nimport { SharedModule } from '../shared/shared.module';\r\n\n\n\n@NgModule({\n  declarations: [LoginComponent, RegisterComponent],\n  imports: [\n    CommonModule,\n    AccountRoutingModule,\n    SharedModule\n  ]\n})\nexport class AccountModule { }\n"],"sourceRoot":"webpack:///"}